(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{TbC0:function(t,e,n){"use strict";n.r(e);var l=n("8Y7J");class i{}var o=n("pMnS"),s=n("LRne"),r=n("HDdC"),c=n("DH7j"),a=n("n6bG"),u=n("lJxs"),h=n("5+tZ"),f=n("vkgz"),p=n("pLZG"),d=n("7o/Q"),g=n("D0XW");class b{constructor(t,e){this.period=t,this.scheduler=e}call(t,e){return e.subscribe(new m(t,this.period,this.scheduler))}}class m extends d.a{constructor(t,e,n){super(t),this.period=e,this.scheduler=n,this.hasValue=!1,this.add(n.schedule(w,e,{subscriber:this,period:e}))}_next(t){this.lastValue=t,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function w(t){let{subscriber:e,period:n}=t;e.notifyNext(),this.schedule(t,n)}function S(t,e,n,l){const i=window&&!!window.document&&window.document.documentElement;let o=i&&e?window:n;if(t&&!(o=t&&i&&"string"==typeof t?function(t,e,l){return(l?window.document:n.nativeElement).querySelector(t)}(t,0,l):t))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return o}function y(t){return t&&!t.firstChange}const T={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},v={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class O{constructor(t=!0){this.vertical=t,this.propsMap=t?T:v}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function P(t){return["Window","global"].some(e=>Object.prototype.toString.call(t).includes(e))}function D(t,e){return t?e.document.documentElement:null}function C(t,e){const n=function({container:t,isWindow:e,axis:n}){const{offsetHeightKey:l,clientHeightKey:i}=x(n);return M(t,e,l,i)}(e);return e.isWindow?function(t,e,n){const{axis:l,container:i,isWindow:o}=n,{offsetHeightKey:s,clientHeightKey:r}=x(l),c=t+H(D(o,i),l,o),a=M(e.nativeElement,o,s,r);return{height:t,scrolled:c,totalToScroll:function(t,e,n){const l=e.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[l]+H(t,e,n)}(e.nativeElement,l,o)+a,isWindow:o}}(n,t,e):function(t,e,n){const{axis:l,container:i}=n;return{height:t,scrolled:i[l.scrollTopKey()],totalToScroll:i[l.scrollHeightKey()],isWindow:!1}}(n,0,e)}function x(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function M(t,e,n,l){if(isNaN(t[n])){const n=D(e,t);return n?n[l]:0}return t[n]}function H(t,e,n){const l=e.pageYOffsetKey(),i=e.scrollTopKey(),o=e.offsetTopKey();return isNaN(window[l])?D(n,t)[i]:t.ownerDocument?t.ownerDocument.defaultView[l]:t[o]}function z(t,e,n){let l,i;if(t.totalToScroll<=0)return!1;const o=t.isWindow?t.scrolled:t.height+t.scrolled;return n?(l=(t.totalToScroll-o)/t.totalToScroll,i=e.down/10):(l=t.scrolled/(t.scrolled+(t.totalToScroll-o)),i=e.up/10),l<=i}class E{constructor({totalToScroll:t}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=t}updateScrollPosition(t){return this.lastScrollPosition=t}updateTotalToScroll(t){this.lastTotalToScroll!==t&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=t)}updateScroll(t,e){this.updateScrollPosition(t),this.updateTotalToScroll(e)}updateTriggeredFlag(t,e){e?this.triggered.down=t:this.triggered.up=t}isTriggeredScroll(t,e){return e?this.triggered.down===t:this.triggered.up===t}}const K={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function W(t){const{scrollDown:e,stats:{scrolled:n}}=t;return{type:e?K.DOWN:K.UP,payload:{currentScrollPosition:n}}}class j{constructor(t,e){this.element=t,this.zone=e,this.scrolled=new l.m,this.scrolledUp=new l.m,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:t,infiniteScrollDisabled:e,infiniteScrollDistance:n}){const l=y(t),i=y(e),o=y(n),s=!i&&!this.infiniteScrollDisabled||i&&!e.currentValue||o;(l||i||o)&&(this.destroyScroller(),s&&this.setup())}setup(){"undefined"!=typeof window&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function(t){const{scrollContainer:e,scrollWindow:n,element:l,fromRoot:i}=t,o=function({windowElement:t,axis:e}){return function(t,e){return Object.assign({},t,{container:t.isWindow||e&&!e.nativeElement?e:e.nativeElement})}({axis:e,isWindow:P(t)},t)}({axis:new O(!t.horizontal),windowElement:S(e,n,l,i)}),d=new E({totalToScroll:C(l,o)}),m={up:t.upDistance,down:t.downDistance};return function(t){let e=function t(e,n,l,i){return Object(a.a)(l)&&(i=l,l=void 0),i?t(e,n,l).pipe(Object(u.a)(t=>Object(c.a)(t)?i(...t):i(t))):new r.a(t=>{!function t(e,n,l,i,o){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,l,o),s=()=>t.removeEventListener(n,l,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,l),s=()=>t.off(n,l)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,l),s=()=>t.removeListener(n,l)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,r=e.length;s<r;s++)t(e[s],n,l,i,o)}i.add(s)}(e,n,function(e){t.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},t,l)})}(t.container,"scroll");return t.throttle&&(e=e.pipe(function(t,e=g.a){return n=>n.lift(new b(t,e))}(t.throttle))),e}({container:o.container,throttle:t.throttle}).pipe(Object(h.a)(()=>Object(s.a)(C(l,o))),Object(u.a)(t=>(function(t,e,n){const{scrollDown:l,fire:i}=function(t,e,n){const l=function(t,e){return t<e.scrolled}(t,e);return{fire:z(e,n,l),scrollDown:l}}(t,e,n);return{scrollDown:l,fire:i,stats:e}})(d.lastScrollPosition,t,m)),Object(f.a)(({stats:t})=>d.updateScroll(t.scrolled,t.totalToScroll)),Object(p.a)(({fire:e,scrollDown:n,stats:{totalToScroll:l}})=>(function(t,e,n){return!(!t||!e)||!(n||!e)})(t.alwaysCallback,e,d.isTriggeredScroll(l,n))),Object(f.a)(({scrollDown:t,stats:{totalToScroll:e}})=>{d.updateTriggeredFlag(e,t)}),Object(u.a)(W))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(t=>this.zone.run(()=>this.handleOnScroll(t)))})}handleOnScroll({type:t,payload:e}){switch(t){case K.DOWN:return this.scrolled.emit(e);case K.UP:return this.scrolledUp.emit(e);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}class k{}var N=n("401J"),_=n("OHZS"),L=n("SVse"),I=n("ATGC"),A=n("CduD"),J=n("nYR2");class V{constructor(t,e,n,l,i){this.apiService=t,this.activatedRoute=e,this.loadingService=n,this.modalService=l,this.message=i,this.isQuerying=!0,this.currentPage=1,this.searchParams={},this.animals=[]}ngOnInit(){this.activatedRoute.queryParamMap.subscribe(t=>{this.currentPage=1,this.animals=[];const e={};t.keys.forEach(n=>{e[n]=t.get(n)}),this.searchParams=e,this.searchAnimals(this.currentPage,this.searchParams)})}scrolled(){this.currentPage+=1,this.searchAnimals(this.currentPage,this.searchParams)}searchAnimals(t,e){this.isQuerying=!0,this.loadingService.show(),this.apiService.getAnimals(t,e).pipe(Object(J.a)(()=>{this.loadingService.hide(),this.isQuerying=!1})).subscribe(t=>{t.success?this.animals.push(...t.result.map(t=>new A.a(t))):this.message.alert(t.errorMessage)})}openImageModal(t){const e={};e.url=t;const n={};n.data=e,this.modalService.open(I.a,n)}}var R=n("Mg80"),U=n("iInd"),Y=n("BNLn"),G=n("8/fu"),Q=n("2vqZ"),X=l.nb({encapsulation:0,styles:[[".wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.wrapper[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]{min-height:300px;min-width:300px;margin:0 20px}.wrapper[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:300px;height:300px}.wrapper[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.wrapper[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center;font-size:25px;font-weight:lighter!important;text-align:center}"]],data:{}});function Z(t){return l.Jb(0,[(t()(),l.pb(0,0,null,null,3,"div",[["infiniteScroll",""]],null,[[null,"scrolled"]],function(t,e,n){var l=!0;return"scrolled"===e&&(l=!1!==t.component.scrolled()&&l),l},null,null)),l.ob(1,4866048,null,0,j,[l.k,l.x],{infiniteScrollDistance:[0,"infiniteScrollDistance"]},{scrolled:"scrolled"}),(t()(),l.pb(2,0,null,null,1,"app-card-list",[],null,[[null,"clickPicture"]],function(t,e,n){var l=!0;return"clickPicture"===e&&(l=!1!==t.component.openImageModal(n)&&l),l},N.b,N.a)),l.ob(3,114688,null,0,_.a,[],{animals:[0,"animals"]},{clickPicture:"clickPicture"})],function(t,e){var n=e.component;t(e,1,0,3),t(e,3,0,n.animals)},null)}function B(t){return l.Jb(0,[(t()(),l.pb(0,0,null,null,5,"div",[["class","wrapper"]],null,null,null,null,null)),(t()(),l.pb(1,0,null,null,4,"div",[["class","message-box"]],null,null,null,null,null)),(t()(),l.pb(2,0,null,null,1,"div",[["class","img"]],null,null,null,null,null)),(t()(),l.pb(3,0,null,null,0,"img",[["alt",""],["src","./assets/images/animal-koala-001.png"],["srcset",""]],null,null,null,null,null)),(t()(),l.pb(4,0,null,null,1,"div",[["class","desc"]],null,null,null,null,null)),(t()(),l.Hb(-1,null,["\u5c1a\u7121\u76f8\u95dc\u8cc7\u8a0a"]))],null,null)}function q(t){return l.Jb(0,[(t()(),l.eb(16777216,null,null,1,null,Z)),l.ob(1,16384,null,0,L.l,[l.M,l.J],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),l.eb(0,[["tmpl",2]],null,0,null,B))],function(t,e){var n=e.component;t(e,1,0,n.isQuerying||n.animals.length,l.Ab(e,2))},null)}function F(t){return l.Jb(0,[(t()(),l.pb(0,0,null,null,1,"app-home",[],null,null,null,q,X)),l.ob(1,114688,null,0,V,[R.a,U.a,Y.a,G.a,Q.a],null,null)],function(t,e){t(e,1,0)},null)}var $=l.lb("app-home",V,F,{},{},[]),tt=n("veSV"),et=n("EEJc"),nt=n("S0sQ"),lt=n("dZKG");class it{}var ot=n("YN91"),st=n("9Xtb"),rt=n("iphE"),ct=n("cMTU"),at=n("8ODU"),ut=n("DWBs"),ht=n("OeaA"),ft=n("PCNd");n.d(e,"HomeModuleNgFactory",function(){return pt});var pt=l.mb(i,[],function(t){return l.yb([l.zb(512,l.j,l.X,[[8,[o.a,$,tt.a,et.a]],[3,l.j],l.v]),l.zb(4608,L.n,L.m,[l.s,[2,L.A]]),l.zb(4608,G.a,G.a,[l.j,l.g]),l.zb(4608,nt.a,nt.a,[lt.a]),l.zb(1073742336,L.b,L.b,[]),l.zb(1073742336,U.p,U.p,[[2,U.u],[2,U.m]]),l.zb(1073742336,it,it,[]),l.zb(1073742336,ot.a,ot.a,[]),l.zb(1073742336,st.a,st.a,[]),l.zb(1073742336,rt.a,rt.a,[]),l.zb(1073742336,ct.a,ct.a,[]),l.zb(1073742336,at.a,at.a,[]),l.zb(1073742336,ut.a,ut.a,[]),l.zb(1073742336,ht.a,ht.a,[]),l.zb(1073742336,ft.a,ft.a,[]),l.zb(1073742336,k,k,[]),l.zb(1073742336,i,i,[]),l.zb(1024,U.k,function(){return[[{path:"",component:V}]]},[])])})}}]);