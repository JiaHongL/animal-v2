(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{TbC0:function(t,e,n){"use strict";n.r(e);var l=n("8Y7J");class i{}var o=n("pMnS"),r=n("LRne"),s=n("HDdC"),c=n("DH7j"),a=n("n6bG"),u=n("lJxs"),h=n("5+tZ"),f=n("vkgz"),p=n("pLZG"),d=n("1Ykd");function g(t,e,n,l){const i=window&&!!window.document&&window.document.documentElement;let o=i&&e?window:n;if(t&&!(o=t&&i&&"string"==typeof t?function(t,e,l){return(l?window.document:n.nativeElement).querySelector(t)}(t,0,l):t))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return o}function b(t){return t&&!t.firstChange}const m={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},w={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class S{constructor(t=!0){this.vertical=t,this.propsMap=t?m:w}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function y(t){return["Window","global"].some(e=>Object.prototype.toString.call(t).includes(e))}function T(t,e){return t?e.document.documentElement:null}function v(t,e){const n=function({container:t,isWindow:e,axis:n}){const{offsetHeightKey:l,clientHeightKey:i}=O(n);return P(t,e,l,i)}(e);return e.isWindow?function(t,e,n){const{axis:l,container:i,isWindow:o}=n,{offsetHeightKey:r,clientHeightKey:s}=O(l),c=t+C(T(o,i),l,o),a=P(e.nativeElement,o,r,s);return{height:t,scrolled:c,totalToScroll:function(t,e,n){const l=e.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[l]+C(t,e,n)}(e.nativeElement,l,o)+a,isWindow:o}}(n,t,e):function(t,e,n){const{axis:l,container:i}=n;return{height:t,scrolled:i[l.scrollTopKey()],totalToScroll:i[l.scrollHeightKey()],isWindow:!1}}(n,0,e)}function O(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function P(t,e,n,l){if(isNaN(t[n])){const n=T(e,t);return n?n[l]:0}return t[n]}function C(t,e,n){const l=e.pageYOffsetKey(),i=e.scrollTopKey(),o=e.offsetTopKey();return isNaN(window[l])?T(n,t)[i]:t.ownerDocument?t.ownerDocument.defaultView[l]:t[o]}function D(t,e,n){let l,i;if(t.totalToScroll<=0)return!1;const o=t.isWindow?t.scrolled:t.height+t.scrolled;return n?(l=(t.totalToScroll-o)/t.totalToScroll,i=e.down/10):(l=t.scrolled/(t.scrolled+(t.totalToScroll-o)),i=e.up/10),l<=i}class M{constructor({totalToScroll:t}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=t}updateScrollPosition(t){return this.lastScrollPosition=t}updateTotalToScroll(t){this.lastTotalToScroll!==t&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=t)}updateScroll(t,e){this.updateScrollPosition(t),this.updateTotalToScroll(e)}updateTriggeredFlag(t,e){e?this.triggered.down=t:this.triggered.up=t}isTriggeredScroll(t,e){return e?this.triggered.down===t:this.triggered.up===t}}const z={DOWN:"[NGX_ISE] DOWN",UP:"[NGX_ISE] UP"};function H(t){const{scrollDown:e,stats:{scrolled:n}}=t;return{type:e?z.DOWN:z.UP,payload:{currentScrollPosition:n}}}class x{constructor(t,e){this.element=t,this.zone=e,this.scrolled=new l.m,this.scrolledUp=new l.m,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:t,infiniteScrollDisabled:e,infiniteScrollDistance:n}){const l=b(t),i=b(e),o=b(n),r=!i&&!this.infiniteScrollDisabled||i&&!e.currentValue||o;(l||i||o)&&(this.destroyScroller(),r&&this.setup())}setup(){"undefined"!=typeof window&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function(t){const{scrollContainer:e,scrollWindow:n,element:l,fromRoot:i}=t,o=function({windowElement:t,axis:e}){return function(t,e){return Object.assign({},t,{container:t.isWindow||e&&!e.nativeElement?e:e.nativeElement})}({axis:e,isWindow:y(t)},t)}({axis:new S(!t.horizontal),windowElement:g(e,n,l,i)}),b=new M({totalToScroll:v(l,o)}),m={up:t.upDistance,down:t.downDistance};return function(t){let e=function t(e,n,l,i){return Object(a.a)(l)&&(i=l,l=void 0),i?t(e,n,l).pipe(Object(u.a)(t=>Object(c.a)(t)?i(...t):i(t))):new s.a(t=>{!function t(e,n,l,i,o){let r;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,l,o),r=()=>t.removeEventListener(n,l,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,l),r=()=>t.off(n,l)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,l),r=()=>t.removeListener(n,l)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let r=0,s=e.length;r<s;r++)t(e[r],n,l,i,o)}i.add(r)}(e,n,function(e){t.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},t,l)})}(t.container,"scroll");return t.throttle&&(e=e.pipe(Object(d.a)(t.throttle))),e}({container:o.container,throttle:t.throttle}).pipe(Object(h.a)(()=>Object(r.a)(v(l,o))),Object(u.a)(t=>(function(t,e,n){const{scrollDown:l,fire:i}=function(t,e,n){const l=function(t,e){return t<e.scrolled}(t,e);return{fire:D(e,n,l),scrollDown:l}}(t,e,n);return{scrollDown:l,fire:i,stats:e}})(b.lastScrollPosition,t,m)),Object(f.a)(({stats:t})=>b.updateScroll(t.scrolled,t.totalToScroll)),Object(p.a)(({fire:e,scrollDown:n,stats:{totalToScroll:l}})=>(function(t,e,n){return!(!t||!e)||!(n||!e)})(t.alwaysCallback,e,b.isTriggeredScroll(l,n))),Object(f.a)(({scrollDown:t,stats:{totalToScroll:e}})=>{b.updateTriggeredFlag(e,t)}),Object(u.a)(H))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(t=>this.zone.run(()=>this.handleOnScroll(t)))})}handleOnScroll({type:t,payload:e}){switch(t){case z.DOWN:return this.scrolled.emit(e);case z.UP:return this.scrolledUp.emit(e);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}class E{}var K=n("401J"),W=n("OHZS"),j=n("LAwb"),k=n("SVse"),L=n("ATGC"),_=n("CduD"),N=n("nYR2");class A{constructor(t,e,n,l,i){this.apiService=t,this.activatedRoute=e,this.loadingService=n,this.modalService=l,this.message=i,this.isQuerying=!0,this.currentPage=1,this.searchParams={},this.animals=[]}ngOnInit(){this.activatedRoute.queryParamMap.subscribe(t=>{this.currentPage=1,this.animals=[];const e={};t.keys.forEach(n=>{e[n]=t.get(n)}),this.searchParams=e,this.searchAnimals(this.currentPage,this.searchParams)})}scrolled(){this.currentPage+=1,this.searchAnimals(this.currentPage,this.searchParams)}searchAnimals(t,e){this.isQuerying=!0,this.loadingService.show(),this.apiService.getAnimals(t,e).pipe(Object(N.a)(()=>{this.loadingService.hide(),this.isQuerying=!1})).subscribe(t=>{t.success?this.animals.push(...t.result.map(t=>new _.a(t))):this.message.alert(t.errorMessage)})}openImageModal(t){const e={};e.url=t;const n={};n.data=e,this.modalService.open(L.a,n)}}var I=n("Mg80"),J=n("iInd"),R=n("BNLn"),U=n("8/fu"),Y=n("2vqZ"),G=l.nb({encapsulation:0,styles:[[".wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.wrapper[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]{min-height:300px;min-width:300px;margin:0 20px}.wrapper[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:300px;height:300px}.wrapper[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.wrapper[_ngcontent-%COMP%]   .message-box[_ngcontent-%COMP%]   .desc[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center;font-size:25px;font-weight:lighter!important;text-align:center}"]],data:{}});function V(t){return l.Jb(0,[(t()(),l.pb(0,0,null,null,3,"div",[["infiniteScroll",""]],null,[[null,"scrolled"]],function(t,e,n){var l=!0;return"scrolled"===e&&(l=!1!==t.component.scrolled()&&l),l},null,null)),l.ob(1,4866048,null,0,x,[l.k,l.x],{infiniteScrollDistance:[0,"infiniteScrollDistance"]},{scrolled:"scrolled"}),(t()(),l.pb(2,0,null,null,1,"app-card-list",[],null,[[null,"clickPicture"]],function(t,e,n){var l=!0;return"clickPicture"===e&&(l=!1!==t.component.openImageModal(n)&&l),l},K.b,K.a)),l.ob(3,114688,null,0,W.a,[j.a],{animals:[0,"animals"]},{clickPicture:"clickPicture"})],function(t,e){var n=e.component;t(e,1,0,3),t(e,3,0,n.animals)},null)}function Q(t){return l.Jb(0,[(t()(),l.pb(0,0,null,null,5,"div",[["class","wrapper"]],null,null,null,null,null)),(t()(),l.pb(1,0,null,null,4,"div",[["class","message-box"]],null,null,null,null,null)),(t()(),l.pb(2,0,null,null,1,"div",[["class","img"]],null,null,null,null,null)),(t()(),l.pb(3,0,null,null,0,"img",[["alt",""],["src","./assets/images/animal-koala-001.png"],["srcset",""]],null,null,null,null,null)),(t()(),l.pb(4,0,null,null,1,"div",[["class","desc"]],null,null,null,null,null)),(t()(),l.Hb(-1,null,["\u5c1a\u7121\u76f8\u95dc\u8cc7\u8a0a"]))],null,null)}function X(t){return l.Jb(0,[(t()(),l.eb(16777216,null,null,1,null,V)),l.ob(1,16384,null,0,k.l,[l.M,l.J],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(t()(),l.eb(0,[["tmpl",2]],null,0,null,Q))],function(t,e){var n=e.component;t(e,1,0,n.isQuerying||n.animals.length,l.Ab(e,2))},null)}function Z(t){return l.Jb(0,[(t()(),l.pb(0,0,null,null,1,"app-home",[],null,null,null,X,G)),l.ob(1,114688,null,0,A,[I.a,J.a,R.a,U.a,Y.a],null,null)],function(t,e){t(e,1,0)},null)}var B=l.lb("app-home",A,Z,{},{},[]),q=n("veSV"),F=n("EEJc"),$=n("S0sQ"),tt=n("dZKG");class et{}var nt=n("VLCt"),lt=n("YN91"),it=n("9Xtb"),ot=n("iphE"),rt=n("cMTU"),st=n("8ODU"),ct=n("DWBs"),at=n("OeaA"),ut=n("PCNd");n.d(e,"HomeModuleNgFactory",function(){return ht});var ht=l.mb(i,[],function(t){return l.yb([l.zb(512,l.j,l.X,[[8,[o.a,B,q.a,F.a]],[3,l.j],l.v]),l.zb(4608,k.n,k.m,[l.s,[2,k.A]]),l.zb(4608,j.a,j.a,[k.c,l.C]),l.zb(4608,U.a,U.a,[l.j,l.g]),l.zb(4608,$.a,$.a,[tt.a]),l.zb(1073742336,k.b,k.b,[]),l.zb(1073742336,J.p,J.p,[[2,J.u],[2,J.m]]),l.zb(1073742336,et,et,[]),l.zb(1073742336,nt.b,nt.b,[]),l.zb(1073742336,lt.a,lt.a,[]),l.zb(1073742336,it.a,it.a,[]),l.zb(1073742336,ot.a,ot.a,[]),l.zb(1073742336,rt.a,rt.a,[]),l.zb(1073742336,st.a,st.a,[]),l.zb(1073742336,ct.a,ct.a,[]),l.zb(1073742336,at.a,at.a,[]),l.zb(1073742336,ut.a,ut.a,[]),l.zb(1073742336,E,E,[]),l.zb(1073742336,i,i,[]),l.zb(1024,J.k,function(){return[[{path:"",component:A}]]},[])])})}}]);